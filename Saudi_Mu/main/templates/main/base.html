{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Saudi Museum{% endblock %}</title>

    <link rel="stylesheet" href="{% static 'css/base.css' %}">
    <link rel="stylesheet" href="{% static 'css/messages.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<!-- NAVBAR -->
<nav class="base-navbar">
    <div class="base-left">
        <span class="base-logo">Saudi Museum</span>
    </div>

    <div class="base-center">
        <a class="base-link" href="{% url 'home' %}">Home</a>
        <a class="base-link" href="{% url 'add_authority' %}">Add Authority</a>
        <a class="base-link" href="{% url 'all_authority' %}">All Authority</a>
        <a class="base-link" href="{% url 'booking' %}">Booking</a>
        <a class="base-link" href="{% url 'contact_us' %}">Contact Us</a>
    </div>

    <div class="base-right">

        <!-- LANGUAGE DROPDOWN -->
        <div class="dropdown">
            <button class="icon-btn" id="languageBtn">üåê</button>
            <div class="dropdown-content">
                <button onclick="doTranslate('en')">English</button>
                <button onclick="doTranslate('ar')">Arabic</button>
            </div>
        </div>

        {% if user.is_authenticated %}
            
            {% if authority_account %}
                <!-- ÿ≠ÿ≥ÿßÿ® ŸáŸäÿ¶ÿ© -->
                <a class="profile-link" href="{% url 'authority_profile' authority_account.id %}">
                    <img src="{{ user.profile.avatar.url }}" class="nav-avatar" alt="Avatar">
                    <span class="nav-username">{{ authority_account.name }}</span>
                </a>
            
            {% else %}
                <!-- ÿ≠ÿ≥ÿßÿ® ŸÖÿ≥ÿ™ÿÆÿØŸÖ -->
                <a class="profile-link" href="{% url 'account:user_profile_view' user_name=user.username %}">
                    <img src="{{ user.profile.avatar.url }}" class="nav-avatar" alt="Avatar">
                    <span class="nav-username">{{ user.username }}</span>
                </a>
            {% endif %}

            <a class="icon-btn" href="{% url 'account:log_out' %}">Log Out</a>

        {% else %}
            <a class="icon-btn" href="{% url 'account:sign_in' %}">Sign In</a>
            <a class="icon-btn" href="{% url 'account:sign_up' %}">Sign Up</a>
        {% endif %}
    </div>
</nav>


<!-- MESSAGES (fixed under navbar) -->
<div class="messages-fixed-top" style="position: fixed; top: 70px; left: 50%; transform: translateX(-50%); z-index: 1050; width: 90%; max-width: 800px;">
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }} alert-dismissible fade show mb-2 text-center" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        {% endfor %}
    {% endif %}
</div>


<!-- MAIN CONTENT -->
<main>
    {% block content %}{% endblock %}
</main>


<!-- FOOTER -->
<footer class="site-footer mt-5">
    <div class="footer-container d-flex justify-content-between flex-wrap">

        <div class="footer-about">
            <h3>Saudi Museum</h3>
        </div>

        <div class="footer-links">
            <h4>Quick Links</h4>
            <ul>
                <li><a href="{% url 'home' %}">Home</a></li>
                <li><a href="{% url 'all_del_museum' %}">All Museums</a></li>
                <li><a href="{% url 'contact_us' %}">Contact Us</a></li>
            </ul>
        </div>

        <div class="footer-contact">
            <h4>Contact Us</h4>
            <p>Email: info@saudimuseum.com</p>
            <p>Phone: 0045614700</p>
        </div>
    </div>
</footer>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- GOOGLE TRANSLATE -->
<div id="google_translate_element" style="display:none;"></div>

<script type="text/javascript">
function googleTranslateElementInit() {
    new google.translate.TranslateElement({pageLanguage: 'en'}, 'google_translate_element');
}

window.addEventListener('load', function() {
    var translateBar = document.querySelector('.goog-te-banner-frame');
    if (translateBar) translateBar.style.display = 'none';

    document.body.style.top = '0';
    document.body.style.position = 'static';
});


/* DROPDOWN LOGIC */
const dropdown = document.querySelector('.dropdown');
const btn = document.getElementById('languageBtn');

btn.addEventListener('click', () => {
    dropdown.classList.toggle('show');
});

document.addEventListener('click', function(event) {
    if (!dropdown.contains(event.target)) {
        dropdown.classList.remove('show');
    }
});

function doTranslate(lang) {
    document.cookie = "googtrans=/en/" + lang + ";path=/";
    location.reload();
}
</script>

<script type="text/javascript"
        src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

</body>
</html>
