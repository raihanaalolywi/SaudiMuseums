{% if messages %}
<div class="messages-container" id="messagesContainer">
    {% for message in messages %}
    <div class="message-card {{ message.tags }}" data-message-id="{{ forloop.counter }}">
        <button class="message-close" onclick="closeMessage(this)">&times;</button>
        
        <div class="message-content">
            <span class="message-icon">
                {% if message.tags == 'success' %}
                    ✓
                {% elif message.tags == 'error' %}
                    ✕
                {% elif message.tags == 'warning' %}
                    ⚠
                {% else %}
                    ℹ
                {% endif %}
            </span>
            <span class="message-text">{{ message }}</span>
        </div>
        
        <div class="message-progress"></div>
    </div>
    {% endfor %}
</div>

<script>
// Auto-hide messages after 5 seconds
document.addEventListener('DOMContentLoaded', function() {
    const messages = document.querySelectorAll('.message-card');
    
    messages.forEach((message, index) => {
        setTimeout(() => {
            message.classList.add('hiding');
            setTimeout(() => {
                message.remove();
                
                // Remove container if no messages left
                const container = document.getElementById('messagesContainer');
                if (container && container.children.length === 0) {
                    container.remove();
                }
            }, 300);
        }, 5000 + (index * 200)); // Stagger the removal
    });
});

// Close message manually
function closeMessage(button) {
    const message = button.parentElement;
    message.classList.add('hiding');
    setTimeout(() => {
        message.remove();
        
        const container = document.getElementById('messagesContainer');
        if (container && container.children.length === 0) {
            container.remove();
        }
    }, 300);
}
</script>
{% endif %}